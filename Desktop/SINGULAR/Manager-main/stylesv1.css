/* ========== Base (modo NOCHE por defecto) ========== */
:root{
  --bg:#0e1b2b; --panel:#122b47; --panel-2:#11324a;
  --ink:#f3f7ff; --muted:#c9d6ee; --line:#2c5c80;
  --brand:#2a6f97; --brand-2:#014f86; --accent:#61a5c2;
  --danger:#ef4444; --radius:16px;
}

/* ========== Modo DÍA (agua cristalina) ========== */
:root[data-theme="light"]{
  --bg:#f4fbff; --panel:#ffffff; --panel-2:#f0f7ff;
  --ink:#0f172a; --muted:#4b5563; --line:#cfe0f5;
  --brand:#3db5ff; --brand-2:#1e9be6; --accent:#9be2ff;
  --danger:#ef4444;
}

*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font:14.5px/1.45 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;color:var(--ink);background:linear-gradient(180deg,var(--bg),#0a1230)}
.hidden{display:none!important}
.i{width:22px;height:22px;fill:currentColor;stroke:currentColor}

.app-header{position:sticky;top:0;z-index:10;padding:8px 10px;border-bottom:1px solid var(--line);background:linear-gradient(180deg,rgba(18,43,71,.9),rgba(18,43,71,.7));backdrop-filter:blur(10px)}
:root[data-theme="light"] .app-header{background:linear-gradient(180deg,rgba(255,255,255,.95),rgba(255,255,255,.85))}
.header-row{display:flex;align-items:center;justify-content:space-between}
.app-title{font-weight:800;letter-spacing:.22rem;font-size:18px}
.toolbar{display:grid;gap:8px;margin-top:8px}
.row{display:flex;align-items:center;gap:8px}
.row.wrap{flex-wrap:wrap}
.stack{display:grid;gap:8px}
.w-full{width:100%}
.alert-region{min-height:22px;margin:6px 0}

/* Ocultar toolbar cuando el router lo indique */
body.hide-toolbar #obra-toolbar{display:none}

.app-main{display:grid;gap:10px;padding:10px}
.card{background:var(--panel);border:1px solid var(--line);border-radius:var(--radius);padding:10px}
.card.compact{padding:10px}
.separator{height:1px;background:#2b4f70;margin:8px -2px}
:root[data-theme="light"] .separator{background:#dbeafe}

label{display:flex;flex-direction:column;gap:6px}
input,select,textarea{width:100%;min-height:40px;border-radius:12px;border:1px solid var(--line);background:#ffffff;color:#0e1325;padding:8px 10px}
:root[data-theme="light"] input,:root[data-theme="light"] select,:root[data-theme="light"] textarea{border-color:#cfe0f5;background:#fff}
select{appearance:none;background-image:linear-gradient(45deg,transparent 50%,currentColor 50%),linear-gradient(135deg,currentColor 50%,transparent 50%);background-position:calc(100% - 20px) 50%,calc(100% - 14px) 50%;background-size:5px 5px,5px 5px;background-repeat:no-repeat}
input::placeholder,textarea::placeholder{color:#7b8fb4}

.btn{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;min-height:38px;border-radius:12px;border:1px solid #334175;background:#0f1b3e;color:#fff;cursor:pointer}
.btn:hover{filter:brightness(1.02)}
.btn.primary{background:linear-gradient(180deg,var(--accent),var(--brand));border-color:transparent;color:#001}
:root[data-theme="light"] .btn{background:#eef6ff;color:#0b2c4d;border-color:#cfe0f5}
:root[data-theme="light"] .btn.primary{background:linear-gradient(180deg,#c9eeff,#64c8ff)}
.btn.danger{background:linear-gradient(180deg,#ff6b6b,var(--danger));border-color:transparent;color:#fff}
.btn.ghost{background:transparent;border-color:transparent;color:var(--ink)}
.btn.square{width:44px;height:44px;justify-content:center}

.chips{display:flex;gap:6px}
.chip{background:#0f1b3e;border:1px solid #334175;padding:4px 8px;border-radius:999px}
:root[data-theme="light"] .chip{background:#eef6ff;border-color:#cfe0f5;color:#0b2c4d}

/* Grid obras (inicio) */
.grid-cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:10px}
.card-obra{background:var(--panel);border:1px solid var(--line);border-radius:14px;overflow:hidden;cursor:pointer;position:relative}
.card-obra img{width:100%;height:110px;object-fit:cover;display:block}
.card-obra .meta{padding:8px;font-weight:600}
.card-obra .change{position:absolute;top:8px;right:8px}

/* Tabla / Cards móvil */
.table-wrap{overflow:auto;border-radius:12px;border:1px solid var(--line);background:var(--panel-2)}
table{width:100%;border-collapse:separate;border-spacing:0;table-layout:fixed}
th,td{padding:10px;border-bottom:1px solid var(--line);vertical-align:top;white-space:normal;word-break:normal;overflow-wrap:anywhere;line-height:1.3}
thead th{position:sticky;top:0;background:#0c1738;color:#fff;z-index:1}
:root[data-theme="light"] thead th{background:#e6f2ff;color:#0b2c4d}
.empty{text-align:center;padding:18px}

@media (max-width:520px){
  thead{display:none}
  table,tbody,tr,td{display:block;width:100%}
  tbody tr{border:1px solid var(--line);border-radius:12px;background:var(--panel);padding:10px;margin-bottom:10px}
  td{display:grid;grid-template-columns:110px 1fr;gap:6px;padding:6px 0;border:0}
  td:nth-child(1)::before{content:'Nombre';font-weight:600}
  td:nth-child(2)::before{content:'Categoría';font-weight:600}
  td:nth-child(3)::before{content:'Subtipo';font-weight:600}
  td:nth-child(4)::before{content:'Cantidad';font-weight:600}
  td:nth-child(5)::before{content:'Marca';font-weight:600}
  td:nth-child(6)::before{content:'Ubicación';font-weight:600}
  td:nth-child(7)::before{content:'Observaciones';font-weight:600}
  td:nth-child(8)::before{content:'Acciones';font-weight:600}
}

/* Modal */
dialog{border:0;padding:0;background:transparent}
dialog[open]{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:1000}
dialog::backdrop{background:rgba(0,0,0,.55)}
.dialog-card{background:#fff;color:#0f172a;border:1px solid #dfe7f2;border-radius:18px;width:min(520px,92vw);max-height:85vh;display:grid;grid-template-rows:auto 1fr auto;overflow:hidden;box-shadow:0 30px 80px rgba(0,0,0,.45)}
.dialog-head{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid #e6eef8;background:#f7faff}
.dialog-head h3{margin:0;font-size:18px;color:#0b2c4d}
.dialog-body{padding:12px 14px;overflow:auto;background:#fff}
.dialog-foot{display:flex;align-items:center;gap:8px;padding:12px 14px;border-top:1px solid #e6eef8;background:#f7faff}

/* Tabs */
.tabbar{position:sticky;bottom:0;z-index:10;border-top:1px solid var(--line);background:linear-gradient(180deg,rgba(18,43,71,.6),rgba(18,43,71,.9));backdrop-filter:blur(10px);display:grid;grid-template-columns:repeat(6,1fr)}
:root[data-theme="light"] .tabbar{background:linear-gradient(180deg,rgba(255,255,255,.85),rgba(255,255,255,.95))}
.tab{display:flex;flex-direction:column;align-items:center;gap:4px;padding:8px 6px;color:#c6d4ee;text-decoration:none}
.tab.active{color:#fff}
:root[data-theme="light"] .tab{color:#415a77}
:root[data-theme="light"] .tab.active{color:#0b2c4d}

/* Títulos de vista */
.view-title{margin:4px 6px 10px}